(window["webpackJsonpbiothings-explorer"]=window["webpackJsonpbiothings-explorer"]||[]).push([[0],{352:function(e,t,a){e.exports=a.p+"static/media/bte-explain.3398c417.png"},353:function(e,t,a){e.exports=a.p+"static/media/bte-predict.16a4b950.png"},358:function(e,t,a){e.exports=a.p+"static/media/biothings-explorer-text.8ec6e86e.png"},359:function(e,t,a){e.exports=a.p+"static/media/network.e94e244a.png"},400:function(e,t,a){e.exports=a(651)},407:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(78),s=a.n(l),i=(a(405),a(406),a(407),a(16)),o=a(17),c=a(19),u=a(18),h=a(20),p=a(680),d=a(681),m=a(674),b=a(391),f=a(653),g=a(661),y=a(27),v=a(352),E=a.n(v),S=a(353),O=a.n(S),C=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(p.a,null,r.a.createElement(d.a,{columns:2,relaxed:"very"},r.a.createElement(d.a.Column,null,r.a.createElement(m.a,{centered:!0,href:"/explorer/explain",color:"red",className:"homeCard"},r.a.createElement(b.a,{src:E.a,wrapped:!0,ui:!1}),r.a.createElement(m.a.Content,{textAlign:"center"},r.a.createElement(m.a.Header,null,"EXPLAIN"),r.a.createElement(m.a.Description,null,"EXPLAIN queries are designed to identify plausible reasoning chains to explain the relationship between two entities.")),r.a.createElement(m.a.Content,{extra:!0,textAlign:"center"},r.a.createElement(y.b,{to:"/explain"},r.a.createElement(f.a,null,"Try it Out"))))),r.a.createElement(d.a.Column,null,r.a.createElement(m.a,{centered:!0,href:"/explorer/predict",color:"green",className:"homeCard"},r.a.createElement(b.a,{src:O.a,wrapped:!0,ui:!1}),r.a.createElement(m.a.Content,{textAlign:"center"},r.a.createElement(m.a.Header,null,"PREDICT"),r.a.createElement(m.a.Description,null,"PREDICT queries are designed to predict plausible relationships between one entity and an entity class, such as Gene.")),r.a.createElement(m.a.Content,{extra:!0,textAlign:"center"},r.a.createElement(y.b,{to:"/predict"},r.a.createElement(f.a,null,"Try it Out")))))),r.a.createElement(g.a,{vertical:!0},"Or")))},w=a(676),j=a(358),k=a.n(j),P=a(359),x=a.n(P),A=a(683),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.state={isNavOpen:!1,isModalOpen:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{color:"violet",inverted:!0},r.a.createElement(A.a.Item,null,r.a.createElement("img",{src:k.a,alt:"BioThings Explorer"})),r.a.createElement(A.a.Item,{name:"HOME",active:"HOME"===e,onClick:this.handleItemClick},r.a.createElement(y.b,{to:"/"},"HOME")),r.a.createElement(A.a.Item,{name:"PREDICT",active:"PREDICT"===e,onClick:this.handleItemClick},r.a.createElement(y.b,{to:"/predict"},"PREDICT")),r.a.createElement(A.a.Item,{name:"EXPLAIN",active:"EXPLAIN"===e,onClick:this.handleItemClick},r.a.createElement(y.b,{to:"/explain"},"EXPLAIN"))),r.a.createElement(d.a,{style:{backgroundColor:"#9f7de8"},textAlign:"center"},r.a.createElement(d.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(b.a,{src:x.a})),r.a.createElement(d.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{style:{color:"#e2e1e6"}},"BioThings Explorer"),r.a.createElement("br",null),r.a.createElement("h3",{style:{color:"#e2e1e6",fontSize:"1.5rem"}},"BioThings Explorer allows users to query a vast amount of biological and chemical databases in a central place by calling APIs which distribute these data on the fly. "))),r.a.createElement(w.a,{warning:!0},r.a.createElement(w.a.Header,null,"This web service is a simple demo for our ",r.a.createElement("a",{href:"https://github.com/biothings/biothings_explorer",target:"_blank",rel:"noopener noreferrer"},"Python Client"),".")))}}]),t}(n.Component),R=a(672);var I=function(e){return r.a.createElement(d.a,{style:{"background-color":"#9f7de8"},textAlign:"center",centered:!0,columns:2},r.a.createElement(d.a.Column,{centered:!0,textAlign:"center"},r.a.createElement("br",null),r.a.createElement("p",null,"Links"),r.a.createElement(R.a,null,r.a.createElement(R.a.Item,null,r.a.createElement(y.b,{to:"/"},"HOME")),r.a.createElement(R.a.Item,null,r.a.createElement(y.b,{to:"/predict"},"PREDICT")),r.a.createElement(R.a.Item,null,r.a.createElement(y.b,{to:"/explain"},"EXPLAIN")))),r.a.createElement(d.a.Column,{centered:!0,textAlign:"center"},r.a.createElement("br",null),r.a.createElement("h5",null,"Contact Us"),r.a.createElement("i",{className:"fa fa-envelope fa-lg"}),": ",r.a.createElement("a",{href:"mailto:biothings@googlegroups.com"},"biothings@googlegroups.com"),r.a.createElement("p",null,"\xa9 Copyright 2017-2020 The Su/Wu Lab.")))},T=a(390),M=a(37),N=a(22),L=a(667),B=a(684),H=a(56),q=a(675),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:10},a.handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(H.a,{circular:!0,name:"info"}),r.a.createElement(q.a,null,r.a.createElement(q.a.Title,{active:0===e,index:0,onClick:this.handleClick},r.a.createElement(H.a,{name:"dropdown"}),'What can "EXPLAIN" queries do?'),r.a.createElement(q.a.Content,{active:0===e},r.a.createElement("p",null,"EXPLAIN queries are designed to identify plausible reasoning chains to explain the relationship between two entities.")),r.a.createElement(q.a.Title,{active:1===e,index:1,onClick:this.handleClick},r.a.createElement(H.a,{name:"dropdown"}),"Give me some examples of EXPLAIN queries."),r.a.createElement(q.a.Content,{active:1===e},r.a.createElement(R.a,{bulleted:!0},r.a.createElement(R.a.Item,null,"Why does ",r.a.createElement("b",null,"imatinib")," have an effect on the treatment of ",r.a.createElement("b",null,"chronic myelogenous leukemia (CML)"),"?"),r.a.createElement(R.a.Item,null,"Why does ",r.a.createElement("b",null,"pentoxifylline")," have an effect on the treatment of ",r.a.createElement("b",null,"severe acute respiratory syndrome"),"?")))))}}]),t}(n.Component),F=a(677),_=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[{key:"input",icon:"pencil",active:this.props.step1Active,link:!0,onClick:this.props.handleBackToStep1,title:"Step 1: Input",completed:this.props.step1Complete,description:"Specify your source and target node"},{key:"metapath",icon:"tasks",active:this.props.step2Active,link:!0,onClick:this.props.handleBackToStep2,disabled:!this.props.step1Complete,title:"Step 2: Metapath",completed:this.props.step2Complete,description:"Select the metapath(s) to perform the query"},{key:"result",icon:"table",active:this.props.step3Active,link:!0,onClick:this.props.handleBackToStep3,disabled:!this.props.step2Complete,title:"Step 3: Result",completed:this.props.step3Complete,description:"Explore the results using graph and table"}];return r.a.createElement("div",{className:"row steps"},r.a.createElement("div",{className:"col-12"},r.a.createElement(F.a.Group,{items:e,widths:3})))}}]),t}(n.Component),Q=a(679);function W(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{category:!0,loading:e.state.isLoading,onResultSelect:function(t,a){var n=a.result;e.handleselect(n)},onSearchChange:e.handleSearchChange,results:e.state.results,value:e.state.value}))}var z=a(668),X=a(671),J=a(669),U=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(J.a,{open:this.props.modalOpen,handleClose:this.props.handleClose,basic:!0,size:"small"},r.a.createElement(J.a.Header,null,"User Input Error"),r.a.createElement(J.a.Content,null,r.a.createElement("h3",null,"You haven't selected the ",this.props.field," yet.")),r.a.createElement(J.a.Actions,null,r.a.createElement(f.a,{color:"green",onClick:this.props.handleClose,inverted:!0},r.a.createElement(H.a,{name:"checkmark"})," Got it")))}}]),t}(n.Component);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSearchChange1=function(e,t){var n=t.value;a.setState({autocomplete1:Y({},a.state.autocomplete1,{isLoading:!0,value:n})}),fetch("https://geneanalysis.ncats.io/explorer_api/v1/hint?q="+n).then((function(e){return e.ok?e.json():{}})).then((function(e){var t={};for(var n in e)if(e[n].length>0){t[n]={name:n,results:[]};var r=e[n].map((function(e,t){return Y({},e,{title:e.name,description:e.display,key:e.name+t.toString()})}));t[n].results=r}a.setState({autocomplete1:Y({},a.state.autocomplete1,{isLoading:!1,results:t})})}))},a.handleSearchChange2=function(e,t){var n=t.value;a.setState({autocomplete2:Y({},a.state.autocomplete1,{isLoading:!0,value:n})}),fetch("https://geneanalysis.ncats.io/explorer_api/v1/hint?q="+n).then((function(e){return e.ok?e.json():{}})).then((function(e){var t={};for(var n in e)if(e[n].length>0){t[n]={name:n,results:[]};var r=e[n].map((function(e,t){return Y({},e,{title:e.name,description:e.display,key:e.name+t.toString()})}));t[n].results=r}a.setState({autocomplete2:Y({},a.state.autocomplete2,{isLoading:!1,results:t})})}))},a.setExample1=function(e){e.preventDefault(),a.setState({autocomplete1:Y({},a.setState.autocomplete1,{value:"IMATINIB"}),autocomplete2:Y({},a.setState.autocomplete2,{value:"chronic myelogenous leukemia"})});a.props.handleInputSelect({chembl:"CHEMBL941",drugbank:"DB00619",name:"Imatinib",pubchem:5291,umls:"C0935989",mesh:"D000068877",chebi:"CHEBI:45783",smiles:"Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1",display:"chembl(CHEMBL941) drugbank(DB00619) name(Imatinib) pubchem(5291) umls(C0935989) mesh(D000068877) chebi(CHEBI:45783) smiles(Cc1ccc(NC(=O)c2ccc(CN3CCN(C)CC3)cc2)cc1Nc1nccc(-c2cccnc2)n1) ",type:"ChemicalSubstance",primary:{identifier:"chembl",cls:"ChemicalSubstance",value:"CHEMBL941"}});a.props.handleOutputSelect({mondo:"MONDO:0011996",doid:"DOID:8552",umls:"C1292772",mesh:"D015464",name:"chronic myelogenous leukemia",display:"mondo(MONDO:0011996) doid(DOID:8552) umls(C1292772) mesh(D015464) name(chronic myelogenous leukemia) ",type:"DiseaseOrPhenotypicFeature",primary:{identifier:"mondo",cls:"DiseaseOrPhenotypicFeature",value:"MONDO:0011996"}})},a.setExample2=function(e){e.preventDefault(),a.setState({autocomplete1:Y({},a.setState.autocomplete1,{value:"cxcr4"}),autocomplete2:Y({},a.setState.autocomplete2,{value:"cxcr2"})});a.props.handleInputSelect({entrez:"7852",name:"C-X-C motif chemokine receptor 4",symbol:"CXCR4",taxonomy:9606,umls:"C1332823",uniprot:"P61073",hgnc:"2561",ensembl:"ENSG00000121966",display:"entrez(7852) name(C-X-C motif chemokine receptor 4) symbol(CXCR4) taxonomy(9606) umls(C1332823) uniprot(P61073) hgnc(2561) ensembl(ENSG00000121966) ",type:"Gene",primary:{identifier:"entrez",cls:"Gene",value:"7852"}});a.props.handleOutputSelect({entrez:"3579",name:"C-X-C motif chemokine receptor 2",symbol:"CXCR2",taxonomy:9606,umls:"C1334126",uniprot:"P25025",hgnc:"6027",ensembl:"ENSG00000180871",display:"entrez(3579) name(C-X-C motif chemokine receptor 2) symbol(CXCR2) taxonomy(9606) umls(C1334126) uniprot(P25025) hgnc(6027) ensembl(ENSG00000180871) ",type:"Gene",primary:{identifier:"entrez",cls:"Gene",value:"3579"}})},a.state={showModal:!1,autocomplete1:{isLoading:!1,results:[],value:""},autocomplete2:{isLoading:!1,results:[],value:""}},a.handleSearchChange1=a.handleSearchChange1.bind(Object(N.a)(a)),a.handleSearchChange2=a.handleSearchChange2.bind(Object(N.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.shouldHide?"":"hidden"},this.props.shouldHide?null:r.a.createElement(U,{field:"input/output",modalOpen:this.props.showModal,handleClose:this.props.handleClose}),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-12"},r.a.createElement(p.a,{color:"green"},r.a.createElement(z.a,{onSubmit:this.props.handleStep1Submit},r.a.createElement(z.a.Group,null,r.a.createElement("h2",null," Step 1: Specify source and target nodes."),r.a.createElement("hr",null)),r.a.createElement(z.a.Group,null,r.a.createElement(f.a,{basic:!0,color:"red",content:"Example 1",onClick:this.setExample1}),r.a.createElement(f.a,{basic:!0,color:"green",content:"Example 2",onClick:this.setExample2})),r.a.createElement("div",null,r.a.createElement(X.a,{content:"The ending node of the paths",header:"Source Node",trigger:r.a.createElement("h3",null,"Source Node")})),r.a.createElement("br",null),r.a.createElement(z.a.Group,null,r.a.createElement(W,{handleselect:this.props.handleInputSelect,handleSearchChange:this.handleSearchChange1,state:this.state.autocomplete1})),r.a.createElement("div",null,r.a.createElement(X.a,{content:"The ending node of the paths",header:"Target Node",trigger:r.a.createElement("h3",null,"Target Node")})),r.a.createElement("br",null),r.a.createElement(z.a.Group,null,r.a.createElement(W,{handleselect:this.props.handleOutputSelect,handleSearchChange:this.handleSearchChange2,state:this.state.autocomplete2})),r.a.createElement("div",{className:"col text-center"},r.a.createElement(f.a,{type:"submit",onClick:this.props.handleStep1Submit},"Continue")))))))}}]),t}(n.Component),K=a(673),$=a(189),ee=function(e){var t=$.a("."+e.className).append("svg").attr("height","20px").attr("width","100%").attr("id","svg-viz-"+e.className),a={G:"#02b3e4",SV:"#e91e63",CS:"#fa750f",PF:"#1b03fc",PW:"#607d8b",T:"#7d4d3e",A:"#4caf50",GF:"#e11F63",P:"#f21e37",CL:"#175442",BS:"#815499",D:"#7761f2",C:"#d8e339",CC:"#3107d9",BP:"#236b44",MA:"#0366fc"},n={Gene:"G",SequenceVariant:"SV",ChemicalSubstance:"CS",PhenotypicFeature:"PF",Pathway:"PW",Transcript:"T",AnatomicalEntity:"A",GeneFamily:"GF",Protein:"P",CellLine:"CL",Biosample:"BS",DiseaseOrPhenotypicFeature:"D",Cell:"C",CellularComponent:"CC",BiologicalProcess:"BP",MolecularActivity:"MA"},r=e.className.split("-").map((function(e){return n[e]}));t.selectAll("circle").data(r).enter().append("circle").attr("r","10").attr("cx",(function(e,t){return 80*t+10})).attr("cy","10").attr("fill",(function(e){return a[e]})),t.selectAll("line").data(r.slice(0,r.length-1)).enter().append("line").attr("x1",(function(e,t){return 80*t+25})).attr("y1","10").attr("y2","10").attr("width",10).attr("x2",(function(e,t){return 80*t+75})).attr("stroke","#ded9d3").attr("stroke-width","1"),t.append("text").selectAll("tspan").data(r).enter().append("tspan").attr("x",(function(e,t){return 80*t+10})).attr("y",10).attr("stroke","white").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","10").text((function(e){return e}))},te=function(e){return Object(n.useEffect)((function(){ee(e)}),[0]),r.a.createElement("div",{className:e.className})},ae=a(42),ne=a.n(ae),re=function(){var e,t,a=$.a(".node-label").append("svg").attr("height","150px").attr("width","100%").attr("id","svg-viz-node-label"),n={G:"#02b3e4",SV:"#e91e63",CS:"#fa750f",PF:"#1b03fc",PW:"#607d8b",T:"#7d4d3e",A:"#4caf50",GF:"#e11F63",P:"#f21e37",CL:"#175442",BS:"#815499",D:"#7761f2",C:"#d8e339",CC:"#3107d9",BP:"#236b44",MA:"#0366fc"},r=ne.a.invert({Gene:"G",SequenceVariant:"SV",ChemicalSubstance:"CS",PhenotypicFeature:"PF",Pathway:"PW",Transcript:"T",AnatomicalEntity:"A",GeneFamily:"GF",Protein:"P",CellLine:"CL",Biosample:"BS",DiseaseOrPhenotypicFeature:"D",Cell:"C",CellularComponent:"CC",BiologicalProcess:"BP",MolecularActivity:"MA"}),l=Object.keys(n);a.selectAll("circle").data(l).enter().append("circle").attr("r","10").attr("cx",(function(e,t){return t%4*160+10})).attr("cy",(function(e,t){return 30*Math.floor(t/4)+10})).attr("fill",(function(e){return n[e]}));for(var s=0;s<l.length;s++)e=l[s],t=s,a.append("text").attr("x",t%4*160+10).attr("y",30*Math.floor(t/4)+10).attr("stroke","white").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","10").text(e),a.append("text").attr("x",t%4*160+40).attr("y",30*Math.floor(t/4)+10).attr("stroke","black").attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size","10").text(r[e])},le=function(){return Object(n.useEffect)((function(){re()}),[2]),r.a.createElement("div",{className:"node-label"})},se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedPath:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.paths.map((function(t,a){return r.a.createElement(K.a.Row,{textAlign:"right",key:a},r.a.createElement(K.a.Cell,{key:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:t,onChange:e.props.handleSelect,defaultChecked:!1}))),r.a.createElement(K.a.Cell,{key:t},r.a.createElement(te,{className:t})))}));return r.a.createElement("div",{className:this.props.shouldHide?"":"hidden"},r.a.createElement(U,{field:"metapath",modalOpen:this.props.showModal,handleClose:this.props.handleClose}),r.a.createElement(p.a,{color:"red"},r.a.createElement("h2",null," Step 2: Select the MetaPath you want to execute."),r.a.createElement("hr",null),r.a.createElement(K.a,{singleLine:!0},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Row,null,r.a.createElement(K.a.HeaderCell,{width:1}),r.a.createElement(K.a.HeaderCell,null,"MetaPath"))),r.a.createElement(K.a.Body,null,t)),r.a.createElement("p",null,"Color Schema"),r.a.createElement(le,null),r.a.createElement("div",{className:"col text-center"},r.a.createElement(f.a,{type:"submit",onClick:this.props.handleBackToStep1},"Back"),r.a.createElement(f.a,{type:"submit",onClick:this.props.handleSubmit},"Continue"))))}}]),t}(n.Component),ie=a(383),oe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(ie.Graph,{id:"graph-id",data:this.props.graph,config:{automaticRearrangeAfterDropNode:!1,collapsible:!1,directed:!0,focusAnimationDuration:.75,focusZoom:1,height:400,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!0,maxZoom:8,minZoom:.1,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,staticGraphWithDragAndDrop:!0,width:800,d3:{alphaTarget:.1,gravity:-200,linkLength:200,linkStrength:1,disableLinkForce:!0},node:{color:"#d3d3d3",fontColor:"black",fontSize:12,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:12,highlightFontWeight:"bold",highlightStrokeColor:"blue",highlightStrokeWidth:"SAME",labelProperty:"name",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:50,strokeColor:"none",strokeWidth:2,svg:"",symbolType:"circle"},link:{color:"#d3d3d3",fontColor:"black",fontSize:12,fontWeight:"normal",highlightColor:"blue",highlightFontSize:8,highlightFontWeight:"bold",labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!0,semanticStrokeWidth:!0,strokeWidth:1.5,markerHeight:6,markerWidth:6}}})}}]),t}(n.Component),ce=a(686),ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.table.display.length>0?Object.keys(this.props.table.display[0]):[];return this.props.resultReady?r.a.createElement(z.a,null,r.a.createElement("h3",null,"Your Query Results"),r.a.createElement(K.a,{sortable:!0,celled:!0,compact:!0},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Row,null,r.a.createElement(K.a.HeaderCell,null),ne.a.map(t,(function(t){return r.a.createElement(K.a.HeaderCell,{key:t,className:t,value:t,sorted:e.props.table.column===t?e.props.table.direction:null,onClick:e.props.handleSort},t)})))),r.a.createElement(K.a.Body,null,ne.a.map(e.props.table.display,(function(a){return r.a.createElement(K.a.Row,{key:Object.values(a).join("||")},r.a.createElement(K.a.Cell,{key:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:Object.values(a).join("||"),onChange:e.props.handleSelect,defaultChecked:!1}),"display")),ne.a.map(t,(function(e,t){return r.a.createElement(K.a.Cell,{key:t},a[e])})))})))),r.a.createElement(ce.a,{onPageChange:e.props.handlePaginationChange,defaultActivePage:1,totalPages:e.props.table.totalPages,siblingRange:1})):null}}]),t}(n.Component),he=a(682),pe=a(666),de=function(){return r.a.createElement(p.a,null,r.a.createElement(he.a,{active:!0,inverted:!0},r.a.createElement(pe.a,null)),r.a.createElement("h2",null,"The result might take a couple minutes to show up. "),r.a.createElement(b.a,{src:"https://react.semantic-ui.com/images/wireframe/paragraph.png"}),r.a.createElement(b.a,{src:"https://react.semantic-ui.com/images/wireframe/paragraph.png"}))},me=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.logs.map((function(e,t){return r.a.createElement("p",{key:t},e)}));return r.a.createElement("div",{className:this.props.shouldHide?"":"hidden"},r.a.createElement(p.a,{color:"blue"},this.props.resultReady&&0===this.props.content.length?r.a.createElement("h2",null,"Sorry, no results could be found for your query. Please refine your search!"):"",this.props.resultReady&&this.props.content.length>0?r.a.createElement("div",null,r.a.createElement("h2",null," Step 3: Select the Query Result you want to display."),r.a.createElement("hr",null),r.a.createElement(J.a,{trigger:r.a.createElement(f.a,{basic:!0,color:"red"},"Query Execution Logs"),closeIcon:!0},r.a.createElement(J.a.Header,null,"Query Execution Logs"),r.a.createElement(J.a.Description,null,e)),r.a.createElement("br",null),r.a.createElement("br",null)):null,this.props.resultReady?null:r.a.createElement(de,null),this.props.resultReady&&this.props.content.length>0?r.a.createElement(ue,{resultReady:this.props.resultReady,handleSelect:this.props.handleSelect,content:this.props.content,table:this.props.table,handleSort:this.props.handleSort,handlePaginationChange:this.props.handlePaginationChange}):null,r.a.createElement(g.a,null),0===this.props.graph.links.length?null:r.a.createElement(oe,{graph:this.props.graph,resultReady:this.props.resultReady})))}}]),t}(n.Component);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge=a(42),ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){return a.setState({showModal:!1})},a.handlePaginationChange=function(e,t){var n=t.activePage;a.setState({table:fe({},a.state.table,{display:a.state.queryResults.slice(10*n-10,10*n),activePage:n})})},a.state={step1Active:!0,step2Active:!1,step3Active:!1,step1Complete:!1,step2Complete:!1,step3Complete:!1,resultReady:!1,selectedInput:{},selectedOutput:{},paths:[],selectedPaths:new Set,queryResults:[],queryLog:[],table:{column:null,display:[],direction:null,activePage:1,totalPages:1},selectedQueryResults:new Set,graph:{nodes:[{id:"kevin"}],links:[]},showInput:!0,showMetaPath:!1,showResult:!1,showModal:!1},a.handleStep1Submit=a.handleStep1Submit.bind(Object(N.a)(a)),a.handleStep2Submit=a.handleStep2Submit.bind(Object(N.a)(a)),a.handleInputSelect=a.handleInputSelect.bind(Object(N.a)(a)),a.handleOutputSelect=a.handleOutputSelect.bind(Object(N.a)(a)),a.handleMetaPathSelect=a.handleMetaPathSelect.bind(Object(N.a)(a)),a.handleQueryResultSelect=a.handleQueryResultSelect.bind(Object(N.a)(a)),a.handleBackToStep1=a.handleBackToStep1.bind(Object(N.a)(a)),a.handleBackToStep2=a.handleBackToStep2.bind(Object(N.a)(a)),a.handleBackToStep3=a.handleBackToStep3.bind(Object(N.a)(a)),a.handleClose=a.handleClose.bind(Object(N.a)(a)),a.handlePaginationChange=a.handlePaginationChange.bind(Object(N.a)(a)),a.handleSort=a.handleSort.bind(Object(N.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleInputSelect",value:function(e){this.setState({selectedInput:e})}},{key:"handleOutputSelect",value:function(e){this.setState({selectedOutput:e})}},{key:"handleMetaPathSelect",value:function(e){var t=this.state.selectedPaths;e.target.checked?t.add(e.target.name):t.delete(e.target.name),this.setState({selectedPaths:t})}},{key:"handleQueryResultSelect",value:function(e){var t=this.state.selectedQueryResults;e.target.checked?t.add(e.target.name):t.delete(e.target.name);var a=this.recordsToGraph(t);this.setState({selectedQueryResults:t,graph:a})}},{key:"handleStep1Submit",value:function(e){var t=this;e.preventDefault(),ge.isEmpty(this.state.selectedInput)||ge.isEmpty(this.state.selectedOutput)?this.setState({showModal:!0}):(this.setState({step1Active:!1,step1Complete:!0,step2Active:!0,step3Active:!1,step2Complete:!1,step3Complete:!1,selectedPaths:new Set,queryResults:[],selectedQueryResults:new Set,graph:{nodes:[{id:"kevin"}],links:[]},showInput:!1,showMetaPath:!0,showResult:!1}),fetch("https://geneanalysis.ncats.io/explorer_api/v1/find_metapath?input_cls="+this.state.selectedInput.type+"&output_cls="+this.state.selectedOutput.type).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){t.setState({paths:e.edges})})).catch((function(e){console.log("MetaPath could not be found",e.message),alert("Sorry! Metapath could not be found.\nError: "+e.message)})))}},{key:"handleBackToStep1",value:function(e){e.preventDefault(),this.setState({step1Active:!0,step2Active:!1,step3Active:!1,showInput:!0,showMetaPath:!1,showResult:!1})}},{key:"handleStep2Submit",value:function(e){var t=this;e.preventDefault();var a=this.getIntermediateNodes(this.state.selectedPaths);if(0===a.length)this.setState({showModal:!0});else{var n=new URL("https:/geneanalysis.ncats.io/explorer_api/v1/connect");this.setState({step2Active:!1,step2Complete:!0,step3Active:!0,showMetaPath:!1,showResult:!0,resultReady:!1});var r={input_obj:JSON.stringify(this.state.selectedInput),output_obj:JSON.stringify(this.state.selectedOutput),intermediate_nodes:JSON.stringify(a)};n.search=new URLSearchParams(r).toString(),fetch(n).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){t.setState({queryResults:e.data,table:fe({},t.state.table,{display:e.data.slice(10*t.state.table.activePage-10,10*t.state.table.activePage),totalPages:Math.ceil(e.data.length/10)}),queryLog:e.log,resultReady:!0,step3Complete:!0})})).catch((function(e){console.log("Query Results could not be retrieved ",e.message),t.setState({resultReady:!0,step3Complete:!0,queryResults:[]})}))}}},{key:"getIntermediateNodes",value:function(e){return Object(T.a)(e).map((function(e){return e.split("-").slice(1)[0]}))}},{key:"handleBackToStep2",value:function(e){e.preventDefault(),this.setState({step1Active:!1,step2Active:!0,step3Active:!1,showInput:!1,showMetaPath:!0,showResult:!1})}},{key:"handleBackToStep3",value:function(e){e.preventDefault(),this.setState({step1Active:!1,step2Active:!1,step3Active:!0,showInput:!1,showMetaPath:!1,showResult:!0})}},{key:"handleSort",value:function(e){var t=e.target.className.split(" ").slice(-1)[0],a=this.state.table,n=a.column,r=a.direction;n===t?this.setState({table:fe({},this.state.table,{direction:"ascending"===r?"descending":"ascending",display:this.state.queryResults.slice(10*this.state.table.activePage-10,10*this.state.table.activePage)}),queryResults:this.state.queryResults.reverse()}):this.setState({table:fe({},this.state.table,{column:t,direction:"descending"}),queryResults:ge.sortBy(this.state.queryResults,[t])})}},{key:"posOrNeg",value:function(e){return 0===e?0:e%2===0?1:-1}},{key:"recordsToGraph",value:function(e){e=Array.from(e);var t={nodes:[{id:"kevin"}],links:[]};Array.isArray(e)&&e.length&&(t.nodes=[{id:e[0].split("||")[0],color:"green",x:20,y:200},{id:e[0].split("||")[7],color:"blue",x:700,y:200}]);for(var a=0;a<e.length;a++)if(a<10){var n=e[a].split("||");t.links.push({source:n[0],target:n[3],label:n[1]}),t.links.push({source:n[3],target:n[7],label:n[5]}),t.nodes.push({id:n[3],color:"red",x:360,y:200+this.posOrNeg(a)*Math.ceil(a/2)*30})}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"feature"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(B.a,null,r.a.createElement(B.a.Section,null,r.a.createElement(y.b,{to:"/"},"Home")),r.a.createElement(B.a.Divider,null),r.a.createElement(B.a.Section,{active:!0},"Explain"))),r.a.createElement("div",{className:"col-12"},r.a.createElement(G,null),r.a.createElement("hr",null))),r.a.createElement(_,{step1Active:this.state.step1Active,step2Active:this.state.step2Active,step3Active:this.state.step3Active,step1Complete:this.state.step1Complete,step2Complete:this.state.step2Complete,step3Complete:this.state.step3Complete,handleBackToStep1:this.handleBackToStep1,handleBackToStep2:this.handleBackToStep2,handleBackToStep3:this.handleBackToStep3}),r.a.createElement(Z,{shouldHide:this.state.showInput,showModal:this.state.showModal,handleClose:this.handleClose,handleStep1Submit:this.handleStep1Submit,handleInputSelect:this.handleInputSelect,handleOutputSelect:this.handleOutputSelect}),r.a.createElement(se,{shouldHide:this.state.showMetaPath,showModal:this.state.showModal,handleClose:this.handleClose,paths:this.state.paths,handleSelect:this.handleMetaPathSelect,handleSubmit:this.handleStep2Submit,handleBackToStep1:this.handleBackToStep1}),r.a.createElement(me,{shouldHide:this.state.showResult,resultReady:this.state.resultReady,content:this.state.queryResults,table:this.state.table,handleSort:this.handleSort,handlePaginationChange:this.handlePaginationChange,logs:this.state.queryLog,handleSelect:this.handleQueryResultSelect,graph:this.state.graph})))}}]),t}(n.Component),ve=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:10},a.handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(H.a,{circular:!0,name:"info"}),r.a.createElement(q.a,null,r.a.createElement(q.a.Title,{active:0===e,index:0,onClick:this.handleClick},r.a.createElement(H.a,{name:"dropdown"}),"What can ",r.a.createElement("b",null,'"PREDICT"')," queries do?"),r.a.createElement(q.a.Content,{active:0===e},r.a.createElement("p",null,"PREDICT queries are designed to predict plausible relationships between one entity and an entity class.")),r.a.createElement(q.a.Title,{active:1===e,index:1,onClick:this.handleClick},r.a.createElement(H.a,{name:"dropdown"}),"Give me some examples of ",r.a.createElement("b",null,'"PREDICT"')," queries."),r.a.createElement(q.a.Content,{active:1===e},r.a.createElement(R.a,{bulleted:!0},r.a.createElement(R.a.Item,null,"What ",r.a.createElement("b",null,"drugs")," might be used to treat ",r.a.createElement("b",null,"hyperphenylalaninemia"),'?"'),r.a.createElement(R.a.Item,null,"What ",r.a.createElement("b",null,"genes")," are in the same pathway as ",r.a.createElement("b",null,"CDK7"),"?")))))}}]),t}(n.Component),Ee={isLoading:!1,results:[],value:"",data:[]},Se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=Ee,a.handleResultSelect=function(e,t){var n=t.result;a.setState({value:n.title}),a.props.handleSelect(n.title)},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(Ee);var e=new RegExp(ne.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:ne.a.filter(a.state.data,(function(t){return e.test(t)})).map((function(e){return{title:e}}))})}),300)},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://geneanalysis.ncats.io/explorer_api/v1/semantictypes").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){console.log("response",t),e.setState({data:t})})).catch((function(e){console.log("semantic types could not be fetched",e.message),alert("Semantic Types could not be fetched: "+e.message)}))}},{key:"render",value:function(){var e=this.state,t=(e.data,e.isLoading),a=e.value,n=e.results;return r.a.createElement(Q.a,Object.assign({loading:t,onResultSelect:this.handleResultSelect,onSearchChange:ne.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props))}}]),t}(n.Component);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSearchChange1=function(e,t){var n=t.value;a.setState({autocomplete1:Ce({},a.state.autocomplete1,{isLoading:!0,value:n})}),fetch("https://geneanalysis.ncats.io/explorer_api/v1/hint?q="+n).then((function(e){return e.ok?e.json():{}})).then((function(e){var t={};for(var n in e)if(e[n].length>0){t[n]={name:n,results:[]};var r=e[n].map((function(e,t){return Ce({},e,{title:e.name,description:e.display,key:e.name+t.toString()})}));t[n].results=r}a.setState({autocomplete1:Ce({},a.state.autocomplete1,{isLoading:!1,results:t})})}))},a.state={autocomplete1:{isLoading:!1,results:[],value:""}},a.handleSearchChange1=a.handleSearchChange1.bind(Object(N.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.shouldHide?"":"hidden"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-12"},r.a.createElement(p.a,{color:"green"},r.a.createElement(z.a,{onSubmit:this.props.handleStep1Submit},r.a.createElement(z.a.Group,null,r.a.createElement("h2",null," Step 1: Specify source and target nodes."),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement(X.a,{content:"The starting node of the paths",trigger:r.a.createElement("h3",null,"Source Node")})),r.a.createElement("br",null),r.a.createElement(z.a.Group,null,r.a.createElement(W,{handleselect:this.props.handleInputSelect,handleSearchChange:this.handleSearchChange1,state:this.state.autocomplete1})),r.a.createElement("div",null,r.a.createElement(X.a,{content:"The ending node of the paths",trigger:r.a.createElement("h3",null,"Target Node")})),r.a.createElement("br",null),r.a.createElement(z.a.Group,null,r.a.createElement(Se,{handleSelect:this.props.handleOutputSelect})),r.a.createElement("div",{className:"col text-center"},r.a.createElement(f.a,{type:"submit",onClick:this.props.handleStep1Submit},"Continue")))))))}}]),t}(n.Component),je=a(385),ke=a.n(je),Pe=(a(613),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.resultReady?r.a.createElement("div",null,r.a.createElement("h3",null,"Graph"),r.a.createElement(ke.a,{data:e.props.graph,height:700,width:1e3})):null}}]),t}(n.Component)),xe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.logs.map((function(e){return r.a.createElement("p",null,e)}));return r.a.createElement("div",{className:this.props.shouldHide?"":"hidden"},r.a.createElement(p.a,{color:"blue"},this.props.resultReady&&0===this.props.content.length?r.a.createElement("h2",null,"Sorry, no results could be found for your query. Please refine your search!"):"",this.props.resultReady&&this.props.content.length>0?r.a.createElement("div",null,r.a.createElement("h2",null," Step 3: Select the Query Result you want to display."),r.a.createElement("hr",null),r.a.createElement(J.a,{trigger:r.a.createElement(f.a,{basic:!0,color:"red"},"Query Execution Logs"),closeIcon:!0},r.a.createElement(J.a.Header,null,"Query Execution Logs"),r.a.createElement(J.a.Description,null,e)),r.a.createElement("br",null),r.a.createElement("br",null)):null,this.props.resultReady?null:r.a.createElement(de,null),this.props.resultReady&&this.props.content.length>0?r.a.createElement(ue,{resultReady:this.props.resultReady,content:this.props.content,handleSelect:this.props.handleSelect,table:this.props.table,handleSort:this.props.handleSort,handlePaginationChange:this.props.handlePaginationChange}):null,r.a.createElement(g.a,null),0===Object.keys(this.props.graph).length?null:r.a.createElement(Pe,{graph:this.props.graph,resultReady:this.props.resultReady})))}}]),t}(n.Component);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=a(42),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handlePaginationChange=function(e,t){var n=t.activePage;a.setState({table:De({},a.state.table,{display:a.state.queryResults.slice(10*n-10,10*n),activePage:n})})},a.state={step1Active:!0,step2Active:!1,step3Active:!1,step1Complete:!1,step2Complete:!1,step3Complete:!1,resultReady:!1,selectedInput:{},selectedOutput:{},paths:[],selectedPaths:new Set,queryResults:[],queryLog:[],table:{column:null,display:[],direction:null,activePage:1,totalPages:1},selectedQueryResults:new Set,graph:{},showInput:!0,showMetaPath:!1,showResult:!1},a.handleStep1Submit=a.handleStep1Submit.bind(Object(N.a)(a)),a.handleStep2Submit=a.handleStep2Submit.bind(Object(N.a)(a)),a.handleInputSelect=a.handleInputSelect.bind(Object(N.a)(a)),a.handleOutputSelect=a.handleOutputSelect.bind(Object(N.a)(a)),a.handleMetaPathSelect=a.handleMetaPathSelect.bind(Object(N.a)(a)),a.handleQueryResultSelect=a.handleQueryResultSelect.bind(Object(N.a)(a)),a.handleBackToStep1=a.handleBackToStep1.bind(Object(N.a)(a)),a.handleBackToStep2=a.handleBackToStep2.bind(Object(N.a)(a)),a.handleBackToStep3=a.handleBackToStep3.bind(Object(N.a)(a)),a.handlePaginationChange=a.handlePaginationChange.bind(Object(N.a)(a)),a.handleSort=a.handleSort.bind(Object(N.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleInputSelect",value:function(e){this.setState({selectedInput:e})}},{key:"handleOutputSelect",value:function(e){this.setState({selectedOutput:e})}},{key:"handleMetaPathSelect",value:function(e){var t=this.state.selectedPaths;e.target.checked?t.add(e.target.name):t.delete(e.target.name),this.setState({selectedPaths:t})}},{key:"handleQueryResultSelect",value:function(e){var t=this.state.selectedQueryResults;e.target.checked?t.add(e.target.name):t.delete(e.target.name);var a=this.recordsToTreeGraph(t);this.setState({selectedQueryResults:t,graph:a})}},{key:"handleStep1Submit",value:function(e){var t=this;e.preventDefault(),this.setState({step1Active:!1,step1Complete:!0,step2Active:!0,step3Active:!1,step2Complete:!1,step3Complete:!1,selectedPaths:new Set,queryResults:[],selectedQueryResults:new Set,graph:{},showInput:!1,showMetaPath:!0,showResult:!1}),fetch("https://geneanalysis.ncats.io/explorer_api/v1/find_metapath?input_cls="+this.state.selectedInput.type+"&output_cls="+this.state.selectedOutput).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){t.setState({paths:e.edges})})).catch((function(e){console.log("find metapath failed",e.message),alert("Find MetaPath Failed.\nError: "+e.message)}))}},{key:"handleBackToStep1",value:function(e){e.preventDefault(),this.setState({step1Active:!0,step2Active:!1,step3Active:!1,showInput:!0,showMetaPath:!1,showResult:!1})}},{key:"handleStep2Submit",value:function(e){var t=this;if(e.preventDefault(),0===this.getIntermediateNodes(this.state.selectedPaths).length)this.setState({showModal:!0});else{this.setState({step2Active:!1,step2Complete:!0,step3Active:!0,showMetaPath:!1,showResult:!0,resultReady:!1});var a=new URL("https://geneanalysis.ncats.io/explorer_api/v1/connect"),n={input_obj:JSON.stringify(this.state.selectedInput),output_obj:JSON.stringify(this.state.selectedOutput),intermediate_nodes:JSON.stringify(["Gene"])};a.search=new URLSearchParams(n).toString(),fetch(a).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){t.setState({queryResults:e.data,queryLog:e.log,table:De({},t.state.table,{display:e.data.slice(10*t.state.table.activePage-10,10*t.state.table.activePage),totalPages:Math.ceil(e.data.length/10)}),resultReady:!0,step3Complete:!0})})).catch((function(e){console.log("post comments",e.message),t.setState({resultReady:!0,step3Complete:!0,queryResults:[]})}))}}},{key:"handleBackToStep2",value:function(e){e.preventDefault(),this.setState({step1Active:!1,step2Active:!0,step3Active:!1,showInput:!1,showMetaPath:!0,showResult:!1})}},{key:"handleBackToStep3",value:function(e){e.preventDefault(),this.setState({step1Active:!1,step2Active:!1,step3Active:!0,showInput:!1,showMetaPath:!1,showResult:!0})}},{key:"handleSort",value:function(e){var t=e.target.className.split(" ").slice(-1)[0],a=this.state.table,n=a.column,r=a.direction;n===t?this.setState({table:De({},this.state.table,{direction:"ascending"===r?"descending":"ascending",display:this.state.queryResults.slice(10*this.state.table.activePage-10,10*this.state.table.activePage)}),queryResults:this.state.queryResults.reverse()}):this.setState({table:De({},this.state.table,{column:t,direction:"descending"}),queryResults:Re.sortBy(this.state.queryResults,[t])})}},{key:"recordsToTreeGraph",value:function(e){e=Array.from(e);var t={},a={children:[]};Array.isArray(e)&&e.length&&(a.name=e[0].split("||")[0]);for(var n=0;n<e.length;n++){var r=e[n].split("||");r[3]in t?t[r[3]].add(r[7]):t[r[3]]=new Set([r[7]])}for(var l in t){var s={name:l,pathProps:l,children:[]};s.children=Array.from(t[l]).map((function(e){return{name:e,children:[]}})),a.children.push(s)}return a}},{key:"render",value:function(){return r.a.createElement("div",{className:"feature"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(B.a,null,r.a.createElement(B.a.Section,null,r.a.createElement(y.b,{to:"/"},"Home")),r.a.createElement(B.a.Divider,null),r.a.createElement(B.a.Section,{active:!0},"Predict"))),r.a.createElement("div",{className:"col-12"},r.a.createElement(ve,null),r.a.createElement("hr",null))),r.a.createElement(_,{step1Active:this.state.step1Active,step2Active:this.state.step2Active,step3Active:this.state.step3Active,step1Complete:this.state.step1Complete,step2Complete:this.state.step2Complete,step3Complete:this.state.step3Complete,handleBackToStep1:this.handleBackToStep1,handleBackToStep2:this.handleBackToStep2,handleBackToStep3:this.handleBackToStep3}),r.a.createElement(we,{shouldHide:this.state.showInput,handleStep1Submit:this.handleStep1Submit,handleInputSelect:this.handleInputSelect,handleOutputSelect:this.handleOutputSelect}),r.a.createElement(se,{shouldHide:this.state.showMetaPath,showModal:this.state.showModal,paths:this.state.paths,handleSelect:this.handleMetaPathSelect,handleSubmit:this.handleStep2Submit,handleBackToStep1:this.handleBackToStep1}),r.a.createElement(xe,{shouldHide:this.state.showResult,resultReady:this.state.resultReady,content:this.state.queryResults,table:this.state.table,handleSort:this.handleSort,handlePaginationChange:this.handlePaginationChange,logs:this.state.queryLog,handleSelect:this.handleQueryResultSelect,graph:this.state.graph})))}}]),t}(n.Component),Te=a(61),Me="http://localhost:3001/",Ne=function(){return{type:"DISHES_LOADING"}},Le=function(e){return{type:"DISHES_FAILED",payload:e}},Be=function(e){return{type:"ADD_DISHES",payload:e}},He=function(e){return{type:"COMMENTS_FAILED",payload:e}},qe=function(e){return{type:"ADD_COMMENTS",payload:e}},Ge=function(){return{type:"PROMOS_LOADING"}},Fe=function(e){return{type:"PROMOS_FAILED",payload:e}},_e=function(e){return{type:"ADD_PROMOS",payload:e}},Qe=a(188),We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={options:[]},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement(y.c,{exact:!0,path:"/",component:C}),r.a.createElement(y.c,{exact:!0,path:"/predict",component:Ie}),r.a.createElement(y.c,{exact:!0,path:"/explain",component:ye}),r.a.createElement(I,null))}}]),t}(n.Component),ze=Object(y.d)(Object(Te.connect)((function(e){return{dishes:e.dishes,comments:e.comments,leaders:e.leaders,promotions:e.promotions}}),(function(e){return{postComment:function(t,a,n,r){e(function(e,t,a,n){return function(r){console.log("posting comment");var l={dishId:e,rating:t,author:a,comment:n};return l.date=(new Date).toISOString(),fetch(Me+"comments",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return r(function(e){return{type:"ADD_COMMENT",payload:e}}(e))})).catch((function(e){console.log("post comments",e.message),alert("Your comment could not be posted\nError: "+e.message)}))}}(t,a,n,r))},fetchDishes:function(){e((function(e){return e(Ne(!0)),fetch(Me+"dishes").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(Be(t))})).catch((function(t){return e(Le(t.message))}))}))},fetchComments:function(){e((function(e){return fetch(Me+"comments").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(qe(t))})).catch((function(t){return e(He(t.message))}))}))},fetchPromos:function(){e((function(e){return e(Ge(!0)),fetch(Me+"promotions").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statsText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(_e(t))})).catch((function(t){return e(Fe(t.message))}))}))},resetFeedbackForm:function(){e(Qe.actions.reset("feedback"))}}}))(We)),Xe=(a(650),a(64));function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,dishes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DISHES":return Ue({},e,{isLoading:!1,errMess:null,dishes:t.payload});case"DISHES_LOADING":return Ue({},e,{isLoading:!0,errMess:null,dishes:[]});case"DISHES_FAILED":return Ue({},e,{isLoading:!1,errMess:t.payload,dishes:[]});default:return e}},Ye={firstname:"",lastname:"",telnum:"",email:"",agree:!1,contactType:"Tel.",message:""};function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errMess:null,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":var a=t.payload;return Ke({},e,{comments:e.comments.concat(a)});case"ADD_COMMENTS":return Ke({},e,{errMess:null,comments:t.payload});case"COMMENTS_FAILED":return Ke({},e,{errMess:t.payload,comments:[]});default:return e}};function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,promotions:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROMOS":return tt({},e,{isLoading:!1,errMess:null,promotions:t.payload});case"PROMOS_LOADING":return tt({},e,{isLoading:!0,errMess:null,promotions:[]});case"PROMOS_FAILED":return tt({},e,{isLoading:!1,errMess:t.payload,promotions:[]});default:return e}},nt=[{id:0,name:"Peter Pan",image:"/assets/images/alberto.png",designation:"Chief Epicurious Officer",abbr:"CEO",featured:!1,description:"Our CEO, Peter, credits his hardworking East Asian immigrant parents who undertook the arduous journey to the shores of America with the intention of giving their children the best future. His mother's wizardy in the kitchen whipping up the tastiest dishes with whatever is available inexpensively at the supermarket, was his first inspiration to create the fusion cuisines for which The Frying Pan became well known. He brings his zeal for fusion cuisines to this restaurant, pioneering cross-cultural culinary connections."},{id:1,name:"Dhanasekaran Witherspoon",image:"/assets/images/alberto.png",designation:"Chief Food Officer",abbr:"CFO",featured:!1,description:"Our CFO, Danny, as he is affectionately referred to by his colleagues, comes from a long established family tradition in farming and produce. His experiences growing up on a farm in the Australian outback gave him great appreciation for varieties of food sources. As he puts it in his own words, Everything that runs, wins, and everything that stays, pays!"},{id:2,name:"Agumbe Tang",image:"/assets/images/alberto.png",designation:"Chief Taste Officer",abbr:"CTO",featured:!1,description:"Blessed with the most discerning gustatory sense, Agumbe, our CFO, personally ensures that every dish that we serve meets his exacting tastes. Our chefs dread the tongue lashing that ensues if their dish does not meet his exacting standards. He lives by his motto, You click only if you survive my lick."},{id:3,name:"Alberto Somayya",image:"/assets/images/alberto.png",designation:"Executive Chef",abbr:"EC",featured:!0,description:"Award winning three-star Michelin chef with wide International experience having worked closely with whos-who in the culinary world, he specializes in creating mouthwatering Indo-Italian fusion experiences. He says, Put together the cuisines from the two craziest cultures, and you get a winning hit! Amma Mia!"}],rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;return t.type,e},lt=a(388),st=a.n(lt),it=a(389),ot=a.n(it);function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ut=Object(Xe.createStore)(Object(Xe.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({dishes:Ve,comments:$e,promotions:at,leaders:rt},Object(Qe.createForms)({feedback:Ye}))),Object(Xe.applyMiddleware)(st.a,ot.a)),ht=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Te.Provider,{store:ut},r.a.createElement(y.a,{basename:"/explorer"},r.a.createElement("div",null,r.a.createElement(ze,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ht,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[400,1,2]]]);
//# sourceMappingURL=main.f40bb456.chunk.js.map